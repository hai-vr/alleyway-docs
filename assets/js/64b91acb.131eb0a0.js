"use strict";(self.webpackChunkalleyway_docs=self.webpackChunkalleyway_docs||[]).push([[595],{4012:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>h,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"products/position-system-to-external-program/firmware-patches","title":"Patching the SR6 firmware","description":"Patching the SR6 firmware file","source":"@site/docs/products/position-system-to-external-program/firmware-patches.md","sourceDirName":"products/position-system-to-external-program","slug":"/products/position-system-to-external-program/firmware-patches","permalink":"/docs/products/position-system-to-external-program/firmware-patches","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":200,"frontMatter":{"sidebar_position":200},"sidebar":"tutorialSidebar","previous":{"title":"Developer docs","permalink":"/docs/products/position-system-to-external-program/developer"}}');var s=t(4848),r=t(8453),n=(t(9618),t(7422),t(6926));const o={sidebar_position:200},h="Patching the SR6 firmware",c={},l=[{value:"Patching the SR6 firmware file",id:"patching-the-sr6-firmware-file",level:2},{value:"Patch",id:"patch",level:3},{value:"Reason",id:"reason",level:3}];function _(a){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...a.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"patching-the-sr6-firmware",children:"Patching the SR6 firmware"})}),"\n",(0,s.jsx)(e.h2,{id:"patching-the-sr6-firmware-file",children:"Patching the SR6 firmware file"}),"\n",(0,s.jsx)(e.p,{children:"If you use the SR6, you may need to patch the firmware to prevent a bug from happening."}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"The following only applies if you use the SR6 robotic arm."})}),"\n",(0,s.jsx)(e.h3,{id:"patch",children:"Patch"}),"\n",(0,s.jsxs)(e.p,{children:["At line 429 of ",(0,s.jsx)(e.code,{children:"SR6-Alpha5_ESP32.ino"}),", in the ",(0,s.jsx)(e.code,{children:"SetPitchServo"})," function, replace the following line:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"  float beta = acos((csq + 5625 - bsq)/(150*c)); // Angle between c-line and servo arm\n"})}),"\n",(0,s.jsx)(e.p,{children:"with this:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"  float beta = acos(constrain((csq + 5625 - bsq)/(150*c), -1, 1)); // Angle between c-line and servo arm\n"})}),"\n",(0,s.jsx)(e.p,{children:"Then, upload the firmware to your device using the instruction manual of your SR6."}),"\n",(0,s.jsx)(e.h3,{id:"reason",children:"Reason"}),"\n",(0,s.jsx)(e.p,{children:"During development of this software, it was discovered that the firmware has a bug that causes an invalid number to be\nsent to the servo motors."}),"\n",(0,s.jsx)(e.p,{children:"This bug happens when the robotic arm is instructed to move to an unusual position, which could realistically be reached\nin the virtual space."}),"\n",(0,s.jsx)(e.p,{children:"This incorrect instruction will cause the servo motors to respond incorrectly by moving to an extreme position."}),"\n",(0,s.jsx)(e.p,{children:"For this reason, if you use the SR6, I recommend you to patch the firmware."}),"\n",(0,s.jsx)(n.U,{src:"./img/firmware-f.mp4",autoWidth:!1,halfWidth:!0}),"\n",(0,s.jsxs)(e.admonition,{type:"note",children:[(0,s.jsxs)(e.p,{children:["For the technical reason: A value greater than 1, such as 1.153 is passed to the ",(0,s.jsx)(e.code,{children:"acos"})," function. This returns NaN."]}),(0,s.jsx)(e.p,{children:"This probably indicates that the inverse kinematics solver within the firmware has a mistake in it."})]})]})}function d(a={}){const{wrapper:e}={...(0,r.R)(),...a.components};return e?(0,s.jsx)(e,{...a,children:(0,s.jsx)(_,{...a})}):_(a)}},6926:(a,e,t)=>{t.d(e,{U:()=>n});t(6540);var i=t(4848);const s="https://large.docs.cdn.hai-vr.dev",r=s+"/assets/docs/";function n(a){const e=null!=a.cdn?s+a.cdn:r+a.src.substring(a.src.lastIndexOf("/")+1);return(0,i.jsx)("video",{controls:!0,muted:!a.sound,width:a.autoWidth?"auto":a.halfWidth?"408":"816",loop:a.loop,children:(0,i.jsx)("source",{src:e})})}},7422:(a,e,t)=>{t.d(e,{F:()=>n});t(6540);var i=t(4164);const s={hai_tag:"hai_tag_ZcC4",hai_tag_requires_vrchat:"hai_tag_requires_vrchat_kYpu",hai_tag_requires_resonite:"hai_tag_requires_resonite_AvzK",hai_tag_requires_basis:"hai_tag_requires_basis_QHoe",hai_tag_requires_chilloutvr:"hai_tag_requires_chilloutvr_mrre",hai_tag_requires_vrm:"hai_tag_requires_vrm_wBUl",hai_tag_compatible_with_vsfavatar:"hai_tag_compatible_with_vsfavatar_gZ5Q",hai_tag_compatible_with_vnyan:"hai_tag_compatible_with_vnyan_N46H",hai_tag_compatible_with_warudo:"hai_tag_compatible_with_warudo_YAVq",hai_tag_compatible_with_beatsaber:"hai_tag_compatible_with_beatsaber_Osd6",hai_tag_requires_steamvr:"hai_tag_requires_steamvr_stxM",hai_tag_universal:"hai_tag_universal_aJnK",hai_tag_not_compatible_with_gltf:"hai_tag_not_compatible_with_gltf_wSoo",hai_tag_supporter:"hai_tag_supporter_xAw7",hai_tag_misc:"hai_tag_misc_X_eB"};var r=t(4848);function n({requiresVRChat:a,isUniversal:e,requiresBasis:t,notVRChat:n,requiresResonite:o,requiresSteamVR:h,requiresChilloutVR:c,requiresVRM:l,compatibleWithVSFAvatar:_,compatibleWithVSeeFace:d,compatibleWithWarudo:m,compatibleWithBeatSaber:p,compatibleWithPhotoshop:u,compatibleWithGIMP:g,requiresWarudo:v,notCompatibleWithGltf:x,compatibleWithVNyan:f,short:j,supporter:w}){let b=j?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:"Compatible with "}),N=j?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:"Requires "});return(0,r.jsxs)("span",{children:[a?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_vrchat),children:["\ud83d\udcac ",N,(0,r.jsx)("span",{className:"notranslate",children:"VRChat"})]}):"",o?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_resonite),children:["\u26a1 ",N,(0,r.jsx)("span",{className:"notranslate",children:"Resonite"})]}):"",t?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_basis),children:["\ud83d\udd3a ",N,(0,r.jsx)("span",{className:"notranslate",children:"Basis"})]}):"",l?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_vrm),children:["\ud83d\udcf9 ",N,(0,r.jsx)("span",{className:"notranslate",children:"VRM"})]}):"",h?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_steamvr),children:[N,(0,r.jsx)("span",{className:"notranslate",children:"SteamVR"})]}):"",c?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_requires_chilloutvr),children:["\ud83c\udf06 ",N,(0,r.jsx)("span",{className:"notranslate",children:"ChilloutVR"})]}):"",_?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_vsfavatar),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"VSFAvatar"})]}):"",d?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_vsfavatar),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"VSeeFace"})]}):"",f?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_vnyan),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"VNyan"})]}):"",m?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_warudo),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"Warudo"})]}):"",p?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_beatsaber),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"Beat Saber"})]}):"",x?(0,r.jsx)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_not_compatible_with_gltf),children:"\ud83d\udeab Not compatible with GLB/GLTF format"}):"",v?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_compatible_with_warudo),children:["\ud83d\udcf9 ",N,(0,r.jsx)("span",{className:"notranslate",children:"Warudo"})]}):"",e?(0,r.jsx)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_universal),children:"\ud83c\udf0a Any Platform"}):"",n?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_universal),children:["\ud83c\udf0a Any Platform, except ",(0,r.jsx)("span",{className:"notranslate",children:"VRChat"})]}):"",w?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_supporter),children:["\u2b50 All Supporter tiers ",(0,r.jsx)("a",{href:"https://www.patreon.com/vr_hai",children:"(5\u20ac+)"})]}):"",u?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_misc),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"Photoshop 2024"})]}):"",g?(0,r.jsxs)("div",{className:(0,i.A)(s.hai_tag,s.hai_tag_misc),children:[b,(0,r.jsx)("span",{className:"notranslate",children:"GIMP"})]}):""]})}},8453:(a,e,t)=>{t.d(e,{R:()=>n,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function n(a){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function o(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(s):a.components||s:n(a.components),i.createElement(r.Provider,{value:e},a.children)}},9618:(a,e,t)=>{t.d(e,{w:()=>s});t(6540);var i=t(4848);function s({children:a}){return(0,i.jsx)("div",{children:(0,i.jsx)("p",{children:a})})}}}]);